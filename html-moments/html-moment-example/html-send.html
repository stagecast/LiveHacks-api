<!DOCTYPE html>
<html>
	<head>
		<title></title>
		<style>
			body {
				font-size: 64px;
				background-color: red;
				color: white;
			}
		</style>
		<script type="text/javascript">
			const channelName = 'my_unique_event';
			const authString = ''; // required for sender, https://github.com/stagecast/LiveHacks-api/tree/master/websocket
			const ws = new WebSocket(`wss://stagecast.se/api/events/${channelName}/ws`);
			window.addEventListener('load', () => {
		        ws.onopen = function() {
		          ws.send(authString);
		          if (window.DeviceOrientationEvent) {
		            window.addEventListener('deviceorientation', handleOrientation);
		          }
		        };
				var lx, ly, lr;
			});
			function handleOrientation() {
				let r = Math.round(event.alpha);
				let x = Math.round(event.gamma);
				let y = Math.round(event.beta);

				document.body.innerHTML = `alpha: ${r}<br>gamma: ${x}<br> beta: ${y}`;
				let data = JSON.stringify({ rawacc: [r, x, y] });
				ws.send(data);
			}
		</script>
	</head>
	<body></body>
</html>
